FROM openjdk:17-jdk-slim

#EXPOSE 8080
ARG JAR_IN_HOST_PATH="../../build/libs/docker-0.0.1-SNAPSHOT.jar"
# ARG ENTRYPOINT_PATH="../app/shell/entrypoint.sh"

ARG SPRING_PROFILE=prod
#ENV SPRING_PROFILE=${SPRING_PROFILE}
ARG USER_SERVER_VERSION=1
#ENV USER_SERVER_VERSION=${USER_SERVER_VERSION}

COPY $JAR_IN_HOST_PATH 'app.jar'
# COPY $ENTRYPOINT_PATH './shell/entrypoint.sh'

# RUN chmod +x /entrypoint.sh

# ENTRYPOINT ". entrypoint.sh"
ENTRYPOINT [ "java -Dspring.profiles.active=${SPRING_PROFILE} -Duser.server.version=${USER_SERVER_VERSION} -jar app.jar" ]