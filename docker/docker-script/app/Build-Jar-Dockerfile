FROM openjdk:17-jdk-slim

EXPOSE 8080

ARG SPRING_PROFILE=prod
ARG SERVER_VERSION=1

ENV SPRING_PROFILE=$SPRING_PROFILE
ENV SERVER_VERSION=$SERVER_VERSION

COPY 'docker/build/libs/docker-0.0.1-SNAPSHOT.jar' 'app.jar'

COPY 'docker/docker-script/app/shell/entrypoint.sh' 'entrypoint.sh'
RUN chmod +x entrypoint.sh

ENTRYPOINT [ "/bin/sh", "-c", "sh entrypoint.sh" ]
