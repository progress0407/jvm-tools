FROM openjdk:17-jdk-slim

EXPOSE 8080

ARG SPRING_PROFILE=prod
ARG USER_SERVER_VERSION=1

ENV SPRING_PROFILE=$SPRING_PROFILE
ENV USER_SERVER_VERSION=$USER_SERVER_VERSIO

# COPY '../../build/libs/docker-0.0.1-SNAPSHOT.jar' 'app.jar'
COPY 'docker/build/libs/docker-0.0.1-SNAPSHOT.jar' 'app.jar'

# ENTRYPOINT [ "java -Dspring.profiles.active=${SPRING_PROFILE} -Duser.server.version=${USER_SERVER_VERSION} -jar app.jar" ]
ENTRYPOINT [ "/bin/sh", "-c", "java -Dspring.profiles.active=${SPRING_PROFILE} -Duser.server.version=${USER_SERVER_VERSION} -jar app.jar" ]
